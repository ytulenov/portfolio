---
title: "Automated Apple Sorting System"
summary: "Engineering Capstone Design Project"
image: "capstonegroupphoto.jpg"
introglb: ""
description: "A Capstone CAD model for JA Orchards, sorting 100 apples/min into seven bins with minimal bruising. Features a conveyor with tilting trays, solenoid actuators, damping trays, hydraulic bin tilters, and stainless steel housing. Fits 10–15m, $100k–$200k budget, using off-the-shelf parts. Meets food safety standards; prototype testing pending."
author: "Yerkin Tulenov, Andrestine Jr. Tan, Taymour Metwalli, Rishan Pfaender, Ethan Walters and Omar Noury | Faculty Advisor: Dr. Louzanne Bam | Prepared for: Sulman Ali of JA. Orchards LTD"
startedAt: "2024-09"
endedAt: "2025-04"
githubLink: "google.com"
---

## Project Story: Solving a Real-World Challenge

When the regional sorting facility in the Okanagan Valley closed in July 2024, JA Orchards LTD faced a crisis: apples were left rotting on trees due to the lack of an efficient sorting solution. As Automation and Robotics Group E, our Capstone team stepped in to design an in-warehouse automated apple sorter. Our goal was to create a proof-of-concept CAD model that sorts 100 apples per minute into six grade-specific bins (one for rejects), minimizes bruising, and fits within a $100K–$200K budget. Beyond the technical challenge, we aimed to support the orchard’s workers and sustainability values, ensuring our design was practical, safe, and eco-friendly.

We started by researching industrial sorting systems, but their scale and cost didn’t suit a mid-sized orchard. Through brainstorming and client feedback, we iterated from initial concepts to a final design featuring an elliptical conveyor, tilting trays, hydraulic bin tilters, and impact-damping trays. Each step taught us to balance efficiency, apple safety, and feasibility, culminating in a system that met JA Orchards’ needs while offering a rich learning experience.

**Video Presentation**: Here’s a quick overview of our project, my role, and how we addressed JA Orchards’ needs.
<div height="100%" width="100%"  style={{ textAlign: "center"}}>
  <video
    controls
    muted
    style={{
      objectFit: "fill",
      height: "100%",
      width: "100%",
      aspectRatio: "1382 / 700",
      borderRadius: "8px",
    }}
    poster="/images/projects/video_presentation_poster.jpg"
  >
    <source src="/images/projects/capstonefootage/Capstone_Project_Video.mp4" type="video/mp4" />
    Your browser does not support the video tag.
  </video>
  <div style={{ fontStyle: "italic", fontSize: "0.9em", color: "#666" }}>
    My team’s presentation—explaining the project’s purpose, design, and impact for JA Orchards LTD.
  </div>
</div>

My role was to design the electrical backbone of an automated apple sorter. I focused on creating a reliable control system, ensuring safety, and minimizing energy use, all while supporting the orchard’s workers and sustainability goals. My journey took me from conceptual sketches to a detailed PCB design, teaching me how to integrate electronics into a mechanical system and manage real-world risks. I have designed three critical PCBs—Main Control, Motor Conveyor Controller, and Power Management—to bring an automated apple sorter to life. 

## Why I Did It: My Objectives

- For Everyone: I wanted to help JA Orchards save their apples by building a sorter that’s fast, safe, and easy to use. My PCBs had to control the machine smoothly, use minimal energy, and keep workers safe.

- For Engineers: My goals were to design PCBs that enable 100 apples/minute sorting, integrate with an AI vision system, and meet IP66 standards. I aimed for low power usage (e.g., motor at 0.19 kW), reliable operation, and safety features like proximity sensors.

## How I Designed the PCBs: My Iterative Journey

### Step 1: Conceptualizing the Electrical System

I started by researching sorting system electronics, realizing we needed three PCBs: one for overall control, one for motor management, and one for power distribution. My first sketch split tasks—Main Control for logic, Motor Controller for conveyor movement, and Power Management for stable voltage. I initially considered a simple Arduino setup, but it lacked the speed for continuous operation.

### Step 2: Designing the Main Control PCB

I chose the STM32F407VGTX microcontroller for its speed and I/O capabilities, designing the Main Control PCB to manage the sorter’s logic. It interfaced with the AI vision system via UART (Pin82) to receive apple grades, controlled solenoids (Pin35) for tilting trays, and monitored safety sensors (Pin29). My first design lacked isolation, risking electrical noise from the orchard environment. I mitigated this by adding opto-isolators (PC817), ensuring stable operation.

![Alt text](/images/projects/controlpanel.png "Main Control PCB Schematic")
<div style={{ textAlign: "center" }}>
  <em>Main Control PCB Schematic</em>
</div>

### Step 3: Developing the Motor Conveyor Controller

Next, I designed the Motor Conveyor Controller to drive the 0.19 kW AC gearmotor (4.56 kWh/day), achieving 100 apples/minute. I used an H-bridge driver (L298N) for precise speed control (Pin24), but early tests showed overheating during continuous 24/6 operation. I switched to a more robust driver (TB6612FNG) and added a heat sink, ensuring reliability while keeping power usage low.

![Alt text](/images/projects/motorconveyor.png "Motor Controller Evolution")
<div style={{ textAlign: "center" }}>
  <em>Motor Controller Evolution</em>
</div>

### Step 4: Building the Power Management PCB

The Power Management PCB needed to supply stable 5V and 24V for the system. I used the MCP1703A regulator for 5V and an LM7824 for 24V, but my initial design caused voltage drops under load. I added capacitors (10µF) and a 5% overvoltage margin, ensuring consistent power. I also included a fuse (600mA) to protect against surges, prioritizing safety.

![Alt text](/images/projects/powermanagement.png "Power Management PCB")
<div style={{ textAlign: "center" }}>
  <em>Power Management PCB</em>
</div>

### Step 5: Assessing and Mitigating Risks

I led the risk assessment for the electrical system, focusing on risks that could disrupt my PCBs. A major concern was sorting accuracy—solenoid misfires (controlled via Pin35) could misdirect apples, affecting quality. I implemented redundant checks in the STM32 logic and added IoT-enabled angle sensors for scheduled calibration, ensuring precision. Another risk was excessive energy consumption; the motor’s 0.19 kW was efficient, but I fine-tuned the system to stay under 4.56 kWh/day by optimizing the Motor Controller’s efficiency. Operator safety was critical—moving parts posed injury risks, so I integrated proximity sensors (TCRT5000) to pause the system if someone approached, and ensured IP66-rated enclosures protected my PCBs from dust and moisture in the orchard environment.

![Alt text](/images/projects/riskmatrix.png "Risk Matrix")
<div style={{ textAlign: "center" }}>
  <em>Risk Matrix</em>
</div>

## My Outcomes: Impact and Growth

- For Everyone: My PCBs enabled a sorter that saves JA Orchards’ apples, sorting them quickly and safely. The controls are user-friendly, and the low 0.19 kW motor usage keeps energy costs down, helping the environment.

- For Engineers: My design achieved 100 apples/minute sorting, integrated with the AI vision system, and met IP66 standards. The PCBs ensured reliable operation, with stable power and safety features, all within budget.

**CAD Model Showcase**: See the full system in action—our final CAD model highlights the conveyor, tilting trays, and bin tilters I helped bring to life with my PCBs.  

<FastVideo
  src="/images/projects/capstonefootage/Capstone_Video_1.mp4"
  poster="/images/projects/cad_model_poster.jpg"
/>

This project taught me PCB design, risk management, and system integration. I learned to iterate through challenges, balance technical and ethical priorities, and design for real-world needs—skills I’ll carry into my automation career.

## What’s Next?

I’d like to prototype the PCBs and create additional ones to ensure better control and modularity, test them in real conditions, and add IoT for remote monitoring. My design could adapt to other farm automation tasks, supporting more small-scale operations.

## Acknowledgments

Thank you to Dr. Louzanne Bam and Sulman Ali of JA Orchards LTD for their guidance. This project deepened my passion for electronics in automation.

## Reflect on My Journey

Want to read more about my personal growth and lessons learned from this project? Check out my reflection below.


<Button text="Read My Reflection" href="/posts/capstone" />